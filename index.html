<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft服务器监控</title>
    <style>
        body { background: #1E90FF; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
        .server-card { background: #0066CC; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .player-list { background: #0052A3; padding: 15px; border-radius: 8px; }
        .status-online { color: #00FF00; }
        .status-offline { color: #FF0000; }
    </style>
</head>
<body>
    <div class="server-card">
        <h2>Minecraft服务器基础信息</h2>
        <p>服务器地址：<span id="server-ip">mc.xfyun.online</span></p>
        <p>服务器状态：<span id="server-status" class="status-offline">查询中...</span></p>
        <p>在线人数：<span id="player-count">--/--</span></p>
        <p>版本信息：<span id="server-version">查询中...</span></p>
        <p>延迟：<span id="server-ping">--ms</span></p>
    </div>
    <div class="player-list">
        <h3>在线玩家列表</h3>
        <p id="player-list">暂无玩家在线/服务器离线</p>
    </div>

    <script>
        // 服务器地址（替换为你的MC服务器地址）
        const SERVER_IP = "mc.xfyun.online";
        // 公开查询接口（无跨域限制）
        const API_URL = `https://api.mcsrvstat.us/2/${SERVER_IP}`;

        // 初始化查询
        fetchServerStatus();

        // 定时刷新（每30秒更新一次）
        setInterval(fetchServerStatus, 30000);

        async function fetchServerStatus() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                // 更新服务器状态
                const statusEl = document.getElementById("server-status");
                if (data.online) {
                    statusEl.className = "status-online";
                    statusEl.textContent = "在线";
                } else {
                    statusEl.className = "status-offline";
                    statusEl.textContent = "离线";
                }

                // 更新在线人数
                document.getElementById("player-count").textContent = 
                    data.players ? `${data.players.online}/${data.players.max}` : "--/--";

                // 更新版本
                document.getElementById("server-version").textContent = 
                    data.version || "未知版本";

                // 更新延迟
                document.getElementById("server-ping").textContent = 
                    data.ping ? `${data.ping}ms` : "--ms";

                // 更新玩家列表
                const playerListEl = document.getElementById("player-list");
                if (data.players && data.players.online > 0 && data.players.list) {
                    playerListEl.textContent = data.players.list.join(", ");
                } else {
                    playerListEl.textContent = "暂无玩家在线/服务器离线";
                }

            } catch (error) {
                console.error("查询失败：", error);
                document.getElementById("server-status").textContent = "查询失败";
                document.getElementById("player-count").textContent = "--/--";
            }
        }
    </script>
</body>
</html>
